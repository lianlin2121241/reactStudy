'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.check = undefined;

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _postcss = require('postcss');

var _postcss2 = _interopRequireDefault(_postcss);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 当前文件所代表的规则名称
 *
 * @const
 * @type {string}
 */
/**
 * @file display-property-grouping 的检测逻辑
 *       Certain properties shouldn't be used with certain display property values
 *       https://github.com/CSSLint/csslint/wiki/Beware-of-display-property-grouping-size
 * @author ielgnaw(wuji0223@gmail.com)
 */

var RULENAME = 'display-property-grouping';

var propertiesToCheck = {
    'display': 1,
    'float': 'none',
    'height': 1,
    'width': 1,
    'margin': 1,
    'margin-left': 1,
    'margin-right': 1,
    'margin-bottom': 1,
    'margin-top': 1,
    'padding': 1,
    'padding-left': 1,
    'padding-right': 1,
    'padding-bottom': 1,
    'padding-top': 1,
    'vertical-align': 1
};

var properties = {};

/**
 * 对 decl 的处理
 *
 * @param {Object} result postcss 转换的结果对象
 * @param {string} prop 属性名称
 * @param {string} display display 属性的值
 * @param {string} msg 错误消息要添加的部分
 */
var addWarn = function addWarn(result, prop, display, msg) {
    var decl = properties[prop];
    if (decl) {
        if (typeof propertiesToCheck[prop] !== 'string' || decl.value.toLowerCase() !== propertiesToCheck[prop]) {
            var source = decl.source;
            var line = source.start.line;
            var col = source.start.column;
            var str = '';
            var colorStr = '';
            if (msg) {
                str = msg + ' can\'t be used with display: `' + display + '`';
                colorStr = msg + ' can\'t be used with display: `' + _chalk2.default.magenta(display) + '`';
            } else {
                str = '`' + prop + '` can\'t be used with display: `' + display + '`';
                colorStr = '' + '`' + _chalk2.default.magenta(prop) + '` can\'t be used with display: `' + _chalk2.default.magenta(display) + '`';
            }

            result.warn(RULENAME, {
                node: decl,
                ruleName: RULENAME,
                line: line,
                col: col,
                message: str,
                colorMessage: colorStr
            });
            global.CSSHINT_INVALID_ALL_COUNT++;
        }
    }
};

/**
 * 具体的检测逻辑
 *
 * @param {Object} opts 参数
 * @param {*} opts.ruleVal 当前规则具体配置的值
 * @param {string} opts.fileContent 文件内容
 * @param {string} opts.filePath 文件路径
 */
var check = exports.check = _postcss2.default.plugin(RULENAME, function (opts) {
    return function (css, result) {
        if (!opts.ruleVal) {
            return;
        }

        css.walkRules(function (rule) {
            properties = {};

            rule.walkDecls(function (decl) {
                if (global.CSSHINT_INVALID_ALL_COUNT >= opts.maxError) {
                    return;
                }

                var prop = decl.prop;
                if (propertiesToCheck[prop]) {
                    properties[prop] = decl;
                }
            });

            var display = properties.display ? properties.display.value : null;
            if (!display) {
                return;
            }

            switch (display) {
                // height, width, margin-top, margin-bottom, float should not be used with inline
                case 'inline':
                    addWarn(result, 'height', display);
                    addWarn(result, 'width', display);
                    addWarn(result, 'margin', display);
                    addWarn(result, 'margin-top', display);
                    addWarn(result, 'margin-bottom', display);
                    addWarn(result, 'float', display, 'display:inline has no effect on floated elements ' + '(but may be used to fix the IE6 double-margin bug).');
                    break;
                // vertical-align should not be used with block
                case 'block':
                    addWarn(result, 'vertical-align', display);
                    break;
                // float should not be used with inline-block
                case 'inline-block':
                    addWarn(result, 'float', display);
                    break;
                // margin, float should not be used with table
                default:
                    if (display.indexOf('table-') === 0) {
                        addWarn(result, 'margin', display);
                        addWarn(result, 'margin-left', display);
                        addWarn(result, 'margin-right', display);
                        addWarn(result, 'margin-top', display);
                        addWarn(result, 'margin-bottom', display);
                        addWarn(result, 'float', display);
                    }
            }
        });
    };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ydWxlL2Rpc3BsYXktcHJvcGVydHktZ3JvdXBpbmcuanMiXSwibmFtZXMiOlsiUlVMRU5BTUUiLCJwcm9wZXJ0aWVzVG9DaGVjayIsInByb3BlcnRpZXMiLCJhZGRXYXJuIiwicmVzdWx0IiwicHJvcCIsImRpc3BsYXkiLCJtc2ciLCJkZWNsIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsInNvdXJjZSIsImxpbmUiLCJzdGFydCIsImNvbCIsImNvbHVtbiIsInN0ciIsImNvbG9yU3RyIiwibWFnZW50YSIsIndhcm4iLCJub2RlIiwicnVsZU5hbWUiLCJtZXNzYWdlIiwiY29sb3JNZXNzYWdlIiwiZ2xvYmFsIiwiQ1NTSElOVF9JTlZBTElEX0FMTF9DT1VOVCIsImNoZWNrIiwicGx1Z2luIiwiY3NzIiwib3B0cyIsInJ1bGVWYWwiLCJ3YWxrUnVsZXMiLCJydWxlIiwid2Fsa0RlY2xzIiwibWF4RXJyb3IiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBT0E7Ozs7QUFDQTs7Ozs7O0FBRUE7Ozs7OztBQVZBOzs7Ozs7O0FBZ0JBLElBQU1BLFdBQVcsMkJBQWpCOztBQUVBLElBQU1DLG9CQUFvQjtBQUN0QixlQUFXLENBRFc7QUFFdEIsYUFBUyxNQUZhO0FBR3RCLGNBQVUsQ0FIWTtBQUl0QixhQUFTLENBSmE7QUFLdEIsY0FBVSxDQUxZO0FBTXRCLG1CQUFlLENBTk87QUFPdEIsb0JBQWdCLENBUE07QUFRdEIscUJBQWlCLENBUks7QUFTdEIsa0JBQWMsQ0FUUTtBQVV0QixlQUFXLENBVlc7QUFXdEIsb0JBQWdCLENBWE07QUFZdEIscUJBQWlCLENBWks7QUFhdEIsc0JBQWtCLENBYkk7QUFjdEIsbUJBQWUsQ0FkTztBQWV0QixzQkFBa0I7QUFmSSxDQUExQjs7QUFrQkEsSUFBSUMsYUFBYSxFQUFqQjs7QUFFQTs7Ozs7Ozs7QUFRQSxJQUFNQyxVQUFVLFNBQVZBLE9BQVUsQ0FBQ0MsTUFBRCxFQUFTQyxJQUFULEVBQWVDLE9BQWYs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UUMsTUFBUixFQUFnQixPQUFoQixFQUF5QkUsT0FBekI7QUFDQTtBQUNKO0FBQ0E7QUFDSSx3QkFBSUEsUUFBUTZCLE9BQVIsQ0FBZ0IsUUFBaEIsTUFBOEIsQ0FBbEMsRUFBcUM7QUFDakNoQyxnQ0FBUUMsTUFBUixFQUFnQixRQUFoQixFQUEwQkUsT0FBMUI7QUFDQUgsZ0NBQVFDLE1BQVIsRUFBZ0IsYUFBaEIsRUFBK0JFLE9BQS9CO0FBQ0FILGdDQUFRQyxNQUFSLEVBQWdCLGNBQWhCLEVBQWdDRSxPQUFoQztBQUNBSCxnQ0FBUUMsTUFBUixFQUFnQixZQUFoQixFQUE4QkUsT0FBOUI7QUFDQUgsZ0NBQVFDLE1BQVIsRUFBZ0IsZUFBaEIsRUFBaUNFLE9BQWpDO0FBQ0FILGdDQUFRQyxNQUFSLEVBQWdCLE9BQWhCLEVBQXlCRSxPQUF6QjtBQUNIO0FBOUJUO0FBZ0NILFNBbkREO0FBb0RILEtBMUR5QztBQUFBLENBQXpCLENBQWQiLCJmaWxlIjoiZGlzcGxheS1wcm9wZXJ0eS1ncm91cGluZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgZGlzcGxheS1wcm9wZXJ0eS1ncm91cGluZyDnmoTmo4DmtYvpgLvovpFcbiAqICAgICAgIENlcnRhaW4gcHJvcGVydGllcyBzaG91bGRuJ3QgYmUgdXNlZCB3aXRoIGNlcnRhaW4gZGlzcGxheSBwcm9wZXJ0eSB2YWx1ZXNcbiAqICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9DU1NMaW50L2Nzc2xpbnQvd2lraS9CZXdhcmUtb2YtZGlzcGxheS1wcm9wZXJ0eS1ncm91cGluZy1zaXplXG4gKiBAYXV0aG9yIGllbGduYXcod3VqaTAyMjNAZ21haWwuY29tKVxuICovXG5cbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgcG9zdGNzcyBmcm9tICdwb3N0Y3NzJztcblxuLyoqXG4gKiDlvZPliY3mlofku7bmiYDku6PooajnmoTop4TliJnlkI3np7BcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IFJVTEVOQU1FID0gJ2Rpc3BsYXktcHJvcGVydHktZ3JvdXBpbmcnO1xuXG5jb25zdCBwcm9wZXJ0aWVzVG9DaGVjayA9IHtcbiAgICAnZGlzcGxheSc6IDEsXG4gICAgJ2Zsb2F0JzogJ25vbmUnLFxuICAgICdoZWlnaHQnOiAxLFxuICAgICd3aWR0aCc6IDEsXG4gICAgJ21hcmdpbic6IDEsXG4gICAgJ21hcmdpbi1sZWZ0JzogMSxcbiAgICAnbWFyZ2luLXJpZ2h0JzogMSxcbiAgICAnbWFyZ2luLWJvdHRvbSc6IDEsXG4gICAgJ21hcmdpbi10b3AnOiAxLFxuICAgICdwYWRkaW5nJzogMSxcbiAgICAncGFkZGluZy1sZWZ0JzogMSxcbiAgICAncGFkZGluZy1yaWdodCc6IDEsXG4gICAgJ3BhZGRpbmctYm90dG9tJzogMSxcbiAgICAncGFkZGluZy10b3AnOiAxLFxuICAgICd2ZXJ0aWNhbC1hbGlnbic6IDFcbn07XG5cbmxldCBwcm9wZXJ0aWVzID0ge307XG5cbi8qKlxuICog5a+5IGRlY2wg55qE5aSE55CGXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlc3VsdCBwb3N0Y3NzIOi9rOaNoueahOe7k+aenOWvueixoVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3Ag5bGe5oCn5ZCN56ewXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGxheSBkaXNwbGF5IOWxnuaAp+eahOWAvFxuICogQHBhcmFtIHtzdHJpbmd9IG1zZyDplJnor6/mtojmga/opoHmt7vliqDnmoTpg6jliIZcbiAqL1xuY29uc3QgYWRkV2FybiA9IChyZXN1bHQsIHByb3AsIGRpc3BsYXksIG1zZykgPT4ge1xuICAgIGNvbnN0IGRlY2wgPSBwcm9wZXJ0aWVzW3Byb3BdO1xuICAgIGlmIChkZWNsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvcGVydGllc1RvQ2hlY2tbcHJvcF0gIT09ICdzdHJpbmcnXG4gICAgICAgICAgICB8fCBkZWNsLnZhbHVlLnRvTG93ZXJDYXNlKCkgIT09IHByb3BlcnRpZXNUb0NoZWNrW3Byb3BdXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3Qgc291cmNlID0gZGVjbC5zb3VyY2U7XG4gICAgICAgICAgICBjb25zdCBsaW5lID0gc291cmNlLnN0YXJ0LmxpbmU7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSBzb3VyY2Uuc3RhcnQuY29sdW1uO1xuICAgICAgICAgICAgbGV0IHN0ciA9ICcnO1xuICAgICAgICAgICAgbGV0IGNvbG9yU3RyID0gJyc7XG4gICAgICAgICAgICBpZiAobXNnKSB7XG4gICAgICAgICAgICAgICAgc3RyID0gbXNnICsgJyBjYW5cXCd0IGJlIHVzZWQgd2l0aCBkaXNwbGF5OiBgJyArIGRpc3BsYXkgKyAnYCc7XG4gICAgICAgICAgICAgICAgY29sb3JTdHIgPSBtc2cgKyAnIGNhblxcJ3QgYmUgdXNlZCB3aXRoIGRpc3BsYXk6IGAnICsgY2hhbGsubWFnZW50YShkaXNwbGF5KSArICdgJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0ciA9ICdgJyArIHByb3AgKyAnYCBjYW5cXCd0IGJlIHVzZWQgd2l0aCBkaXNwbGF5OiBgJyArIGRpc3BsYXkgKyAnYCc7XG4gICAgICAgICAgICAgICAgY29sb3JTdHIgPSAnJ1xuICAgICAgICAgICAgICAgICAgICArICdgJ1xuICAgICAgICAgICAgICAgICAgICArIGNoYWxrLm1hZ2VudGEocHJvcClcbiAgICAgICAgICAgICAgICAgICAgKyAnYCBjYW5cXCd0IGJlIHVzZWQgd2l0aCBkaXNwbGF5OiBgJ1xuICAgICAgICAgICAgICAgICAgICArIGNoYWxrLm1hZ2VudGEoZGlzcGxheSkgKyAnYCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdC53YXJuKFJVTEVOQU1FLCB7XG4gICAgICAgICAgICAgICAgbm9kZTogZGVjbCxcbiAgICAgICAgICAgICAgICBydWxlTmFtZTogUlVMRU5BTUUsXG4gICAgICAgICAgICAgICAgbGluZTogbGluZSxcbiAgICAgICAgICAgICAgICBjb2w6IGNvbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBzdHIsXG4gICAgICAgICAgICAgICAgY29sb3JNZXNzYWdlOiBjb2xvclN0clxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBnbG9iYWwuQ1NTSElOVF9JTlZBTElEX0FMTF9DT1VOVCsrO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiDlhbfkvZPnmoTmo4DmtYvpgLvovpFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyDlj4LmlbBcbiAqIEBwYXJhbSB7Kn0gb3B0cy5ydWxlVmFsIOW9k+WJjeinhOWImeWFt+S9k+mFjee9rueahOWAvFxuICogQHBhcmFtIHtzdHJpbmd9IG9wdHMuZmlsZUNvbnRlbnQg5paH5Lu25YaF5a65XG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5maWxlUGF0aCDmlofku7bot6/lvoRcbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrID0gcG9zdGNzcy5wbHVnaW4oUlVMRU5BTUUsIG9wdHMgPT5cbiAgICAoY3NzLCByZXN1bHQpID0+IHtcbiAgICAgICAgaWYgKCFvcHRzLnJ1bGVWYWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNzcy53YWxrUnVsZXMocnVsZSA9PiB7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzID0ge307XG5cbiAgICAgICAgICAgIHJ1bGUud2Fsa0RlY2xzKGRlY2wgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwuQ1NTSElOVF9JTlZBTElEX0FMTF9DT1VOVCA+PSBvcHRzLm1heEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gZGVjbC5wcm9wO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzVG9DaGVja1twcm9wXSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW3Byb3BdID0gZGVjbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IHByb3BlcnRpZXMuZGlzcGxheSA/IHByb3BlcnRpZXMuZGlzcGxheS52YWx1ZSA6IG51bGw7XG4gICAgICAgICAgICBpZiAoIWRpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZGlzcGxheSkge1xuICAgICAgICAgICAgICAgIC8vIGhlaWdodCwgd2lkdGgsIG1hcmdpbi10b3AsIG1hcmdpbi1ib3R0b20sIGZsb2F0IHNob3VsZCBub3QgYmUgdXNlZCB3aXRoIGlubGluZVxuICAgICAgICAgICAgICAgIGNhc2UgJ2lubGluZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnaGVpZ2h0JywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnd2lkdGgnLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdtYXJnaW4nLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdtYXJnaW4tdG9wJywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnbWFyZ2luLWJvdHRvbScsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ2Zsb2F0JywgZGlzcGxheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5OmlubGluZSBoYXMgbm8gZWZmZWN0IG9uIGZsb2F0ZWQgZWxlbWVudHMgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJyhidXQgbWF5IGJlIHVzZWQgdG8gZml4IHRoZSBJRTYgZG91YmxlLW1hcmdpbiBidWcpLidcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gdmVydGljYWwtYWxpZ24gc2hvdWxkIG5vdCBiZSB1c2VkIHdpdGggYmxvY2tcbiAgICAgICAgICAgICAgICBjYXNlICdibG9jayc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAndmVydGljYWwtYWxpZ24nLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gZmxvYXQgc2hvdWxkIG5vdCBiZSB1c2VkIHdpdGggaW5saW5lLWJsb2NrXG4gICAgICAgICAgICAgICAgY2FzZSAnaW5saW5lLWJsb2NrJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdmbG9hdCcsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBtYXJnaW4sIGZsb2F0IHNob3VsZCBub3QgYmUgdXNlZCB3aXRoIHRhYmxlXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3BsYXkuaW5kZXhPZigndGFibGUtJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnbWFyZ2luJywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ21hcmdpbi1sZWZ0JywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ21hcmdpbi1yaWdodCcsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdtYXJnaW4tdG9wJywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ21hcmdpbi1ib3R0b20nLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnZmxvYXQnLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4pO1xuIl19