'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.check = undefined;

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _postcss = require('postcss');

var _postcss2 = _interopRequireDefault(_postcss);

var _util = require('../util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

'use strict';

/**
 * 规则名称
 *
 * @const
 * @type {string}
 */
/**
 * @file
 * `:` : 1. 属性名后的冒号（:）与属性值之间必须（MUST）保留一个空格，冒号前不得（MUST NOT）保留空格。
 *       2. 定义变量时冒号（:）与变量值之间必须（MUST）保留一个空格，冒号前不得（MUST NOT）保留空格。
 * `,` : 1. 在用逗号（,）分隔的列表（Less 函数参数列表、以 , 分隔的属性值等）中，逗号后必须（MUST）保留一个空格，
 *      逗号前不得（MUST NOT）保留空格。
 *       2. 在给 mixin 传递参数时，在参数分隔符（, / ;）后必须（MUST）保留一个空格
 *
 * 逗号暂时不太好实现
 *
 * https://github.com/ecomfe/spec/blob/master/less-code-style.md#%E5%B1%9E%E6%80%A7%E5%8F%98%E9%87%8F
 * @author ielgnaw(wuji0223@gmail.com)
 */

var RULENAME = 'require-after-space';

/**
 * 冒号
 *
 * @const
 * @type {string}
 */
var COLON = ':';

/**
 * 逗号
 *
 * @const
 * @type {string}
 */
var COMMA = ',';

/**
 * 匹配 css 属性值的 url(...);
 *
 * @const
 * @type {RegExp}
 */
var PATTERN_URI = /url\(["']?([^\)"']+)["']?\)/i;

/**
 * 冒号的错误信息
 *
 * @const
 * @type {string}
 */
var COLON_MSG = '' + 'Disallow contain spaces between the `attr-name` and `:`, ' + 'Must contain spaces between `:` and `attr-value`';

/**
 * 逗号的错误信息
 *
 * @const
 * @type {string}
 */
var COMMA_MSG = 'Must contain spaces after `,` in `attr-value`';

/**
 * 具体的检测逻辑
 *
 * @param {Object} opts 参数
 * @param {*} opts.ruleVal 当前规则具体配置的值
 * @param {string} opts.fileContent 文件内容
 * @param {string} opts.filePath 文件路径
 */
var check = exports.check = _postcss2.default.plugin(RULENAME, function (opts) {
    return function (css, result) {
        var ruleVal = opts.ruleVal;
        var realRuleVal = [];
        Array.prototype.push[Array.isArray(ruleVal) ? 'apply' : 'call'](realRuleVal, ruleVal);

        if (realRuleVal.length) {

            css.walkDecls(function (decl) {
                var source = decl.source;
                var line = source.start.line;
                var lineContent = (0, _util.getLineContent)(line, source.input.css) || '';

                if (realRuleVal.indexOf(COLON) !== -1) {
                    var between = decl.raws.between;

                    if (between.slice(0, 1) !== ':' // `属性名` 与之后的 `:` 之间包含空格了
                    || between.slice(-1) === ':' // `:` 与 `属性值` 之间不包含空格
                    ) {
                            var colorStr = decl.prop + decl.raws.between + decl.value;
                            result.warn(RULENAME, {
                                node: decl,
                                ruleName: RULENAME,
                                line: line,
                                message: COLON_MSG,
                                colorMessage: '`' + lineContent.replace(colorStr, _chalk2.default.magenta(colorStr)) + '` ' + _chalk2.default.grey(COLON_MSG)
                            });
                        }
                }

                if (realRuleVal.indexOf(COMMA) !== -1) {
                    var value = decl.value;

                    // 排除掉 uri 的情况，例如
                    // background-image: url(data:image/gif;base64,R0lGODlhCAAHAIABAGZmZv...);
                    // background-image: 2px 2px url(data:image/gif;base64,R0lGODlhCAAHAIABAGZmZv...);
                    // background-image: url(data:image/gif;base64,R0lGODlhCAAHAIABAGZmZv...) 2px 2px;
                    if (!PATTERN_URI.test(value)) {
                        var items = lineContent.split(';');
                        for (var j = 0, jLen = items.length; j < jLen; j++) {
                            var s = items[j];
                            if (s.indexOf(',') > -1 && /.*,(?!\s)/.test(s) && s.length !== lineContent.length // s.length === lineContent.length 的情况表示当前行结束了
                            ) {
                                    result.warn(RULENAME, {
                                        node: decl,
                                        ruleName: RULENAME,
                                        errorChar: COMMA,
                                        line: line,
                                        message: COMMA_MSG,
                                        colorMessage: '`' + lineContent.replace(value, _chalk2.default.magenta(value)) + '` ' + _chalk2.default.grey(COMMA_MSG)
                                    });
                                }
                        }
                    }
                }
            });
        }
    };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ydWxlL3JlcXVpcmUtYWZ0ZXItc3BhY2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQWNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUVBOzs7Ozs7QUFwQkE7Ozs7Ozs7Ozs7Ozs7O0FBMEJBLElBQU0sV0FBVyxxQkFBakI7O0FBRUE7Ozs7OztBQU1BLElBQU0sUUFBUSxHQUFkOztBQUVBOzs7Ozs7QUFNQSxJQUFNLFFBQVEsR0FBZDs7QUFFQTs7Ozs7O0FBTUEsSUFBTSxjQUFjLDhCQUFwQjs7QUFFQTs7Ozs7O0FBTUEsSUFBTSxZQUFZLEtBQ1osMkRBRFksR0FFWixrREFGTjs7QUFJQTs7Ozs7O0FBTUEsSUFBTSxZQUFZLCtDQUFsQjs7QUFFQTs7Ozs7Ozs7QUFRTyxJQUFNLHdCQUFRLGtCQUFRLE1BQVIsQ0FBZSxRQUFmLEVBQXlCO0FBQUEsV0FDMUMsVUFBQyxHQUFELEVBQU0sTUFBTixFQUFpQjtBQUNiLFlBQU0sVUFBVSxLQUFLLE9BQXJCO0FBQ0EsWUFBTSxjQUFjLEVBQXBCO0FBQ0EsY0FBTSxTQUFOLENBQWdCLElBQWhCLENBQXFCLE1BQU0sT0FBTixDQUFjLE9BQWQsSUFBeUIsT0FBekIsR0FBbUMsTUFBeEQsRUFBZ0UsV0FBaEUsRUFBNkUsT0FBN0U7O0FBRUEsWUFBSSxZQUFZLE1BQWhCLEVBQXdCOztBQUVwQixnQkFBSSxTQUFKLENBQWMsZ0JBQVE7QUFDbEIsb0JBQU0sU0FBUyxLQUFLLE1BQXBCO0FBQ0Esb0JBQU0sT0FBTyxPQUFPLEtBQVAsQ0FBYSxJQUExQjtBQUNBLG9CQUFNLGNBQWMsMEJBQWUsSUFBZixFQUFxQixPQUFPLEtBQVAsQ0FBYSxHQUFsQyxLQUEwQyxFQUE5RDs7QUFFQSxvQkFBSSxZQUFZLE9BQVosQ0FBb0IsS0FBcEIsTUFBK0IsQ0FBQyxDQUFwQyxFQUF1QztBQUNuQyx3QkFBTSxVQUFVLEtBQUssSUFBTCxDQUFVLE9BQTFCOztBQUVBLHdCQUFJLFFBQVEsS0FBUixDQUFjLENBQWQsRUFBaUIsQ0FBakIsTUFBd0IsR0FBeEIsQ0FBNEI7QUFBNUIsdUJBQ0csUUFBUSxLQUFSLENBQWMsQ0FBQyxDQUFmLE1BQXNCLEdBRDdCLENBQ2lDO0FBRGpDLHNCQUVFO0FBQ0UsZ0NBQU0sV0FBVyxLQUFLLElBQUwsR0FBWSxLQUFLLElBQUwsQ0FBVSxPQUF0QixHQUFnQyxLQUFLLEtBQXREO0FBQ0EsbUNBQU8sSUFBUCxDQUFZLFFBQVosRUFBc0I7QUFDbEIsc0NBQU0sSUFEWTtBQUVsQiwwQ0FBVSxRQUZRO0FBR2xCLHNDQUFNLElBSFk7QUFJbEIseUNBQVMsU0FKUztBQUtsQiw4Q0FBYyxNQUNSLFlBQVksT0FBWixDQUNFLFFBREYsRUFFRSxnQkFBTSxPQUFOLENBQWMsUUFBZCxDQUZGLENBRFEsR0FLUixJQUxRLEdBTVIsZ0JBQU0sSUFBTixDQUFXLFNBQVg7QUFYWSw2QkFBdEI7QUFhSDtBQUNKOztBQUVELG9CQUFJLFlBQVksT0FBWixDQUFvQixLQUFwQixNQUErQixDQUFDLENBQXBDLEVBQXVDO0FBQ25DLHdCQUFNLFFBQVEsS0FBSyxLQUFuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUFJLENBQUMsWUFBWSxJQUFaLENBQWlCLEtBQWpCLENBQUwsRUFBOEI7QUFDMUIsNEJBQU0sUUFBUSxZQUFZLEtBQVosQ0FBa0IsR0FBbEIsQ0FBZDtBQUNBLDZCQUFLLElBQUksSUFBSSxDQUFSLEVBQVcsT0FBTyxNQUFNLE1BQTdCLEVBQXFDLElBQUksSUFBekMsRUFBK0MsR0FBL0MsRUFBb0Q7QUFDaEQsZ0NBQU0sSUFBSSxNQUFNLENBQU4sQ0FBVjtBQUNBLGdDQUFJLEVBQUUsT0FBRixDQUFVLEdBQVYsSUFBaUIsQ0FBQyxDQUFsQixJQUNHLFlBQVksSUFBWixDQUFpQixDQUFqQixDQURILElBRUcsRUFBRSxNQUFGLEtBQWEsWUFBWSxNQUZoQyxDQUV1QztBQUZ2Qyw4QkFHRTtBQUNFLDJDQUFPLElBQVAsQ0FBWSxRQUFaLEVBQXNCO0FBQ2xCLDhDQUFNLElBRFk7QUFFbEIsa0RBQVUsUUFGUTtBQUdsQixtREFBVyxLQUhPO0FBSWxCLDhDQUFNLElBSlk7QUFLbEIsaURBQVMsU0FMUztBQU1sQixzREFBYyxNQUNSLFlBQVksT0FBWixDQUNFLEtBREYsRUFFRSxnQkFBTSxPQUFOLENBQWMsS0FBZCxDQUZGLENBRFEsR0FLUixJQUxRLEdBTVIsZ0JBQU0sSUFBTixDQUFXLFNBQVg7QUFaWSxxQ0FBdEI7QUFjSDtBQUNKO0FBQ0o7QUFDSjtBQUVKLGFBOUREO0FBK0RIO0FBQ0osS0F4RXlDO0FBQUEsQ0FBekIsQ0FBZCIsImZpbGUiOiJyZXF1aXJlLWFmdGVyLXNwYWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZVxuICogYDpgIDogMS4g5bGe5oCn5ZCN5ZCO55qE5YaS5Y+377yIOu+8ieS4juWxnuaAp+WAvOS5i+mXtOW/hemhu++8iE1VU1TvvInkv53nlZnkuIDkuKrnqbrmoLzvvIzlhpLlj7fliY3kuI3lvpfvvIhNVVNUIE5PVO+8ieS/neeVmeepuuagvOOAglxuICogICAgICAgMi4g5a6a5LmJ5Y+Y6YeP5pe25YaS5Y+377yIOu+8ieS4juWPmOmHj+WAvOS5i+mXtOW/hemhu++8iE1VU1TvvInkv53nlZnkuIDkuKrnqbrmoLzvvIzlhpLlj7fliY3kuI3lvpfvvIhNVVNUIE5PVO+8ieS/neeVmeepuuagvOOAglxuICogYCxgIDogMS4g5Zyo55So6YCX5Y+377yILO+8ieWIhumalOeahOWIl+ihqO+8iExlc3Mg5Ye95pWw5Y+C5pWw5YiX6KGo44CB5LulICwg5YiG6ZqU55qE5bGe5oCn5YC8562J77yJ5Lit77yM6YCX5Y+35ZCO5b+F6aG777yITVVTVO+8ieS/neeVmeS4gOS4quepuuagvO+8jFxuICogICAgICDpgJflj7fliY3kuI3lvpfvvIhNVVNUIE5PVO+8ieS/neeVmeepuuagvOOAglxuICogICAgICAgMi4g5Zyo57uZIG1peGluIOS8oOmAkuWPguaVsOaXtu+8jOWcqOWPguaVsOWIhumalOespu+8iCwgLyA777yJ5ZCO5b+F6aG777yITVVTVO+8ieS/neeVmeS4gOS4quepuuagvFxuICpcbiAqIOmAl+WPt+aaguaXtuS4jeWkquWlveWunueOsFxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9lY29tZmUvc3BlYy9ibG9iL21hc3Rlci9sZXNzLWNvZGUtc3R5bGUubWQjJUU1JUIxJTlFJUU2JTgwJUE3JUU1JThGJTk4JUU5JTg3JThGXG4gKiBAYXV0aG9yIGllbGduYXcod3VqaTAyMjNAZ21haWwuY29tKVxuICovXG5cbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgcG9zdGNzcyBmcm9tICdwb3N0Y3NzJztcbmltcG9ydCB7Z2V0TGluZUNvbnRlbnR9IGZyb20gJy4uL3V0aWwnO1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICog6KeE5YiZ5ZCN56ewXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBSVUxFTkFNRSA9ICdyZXF1aXJlLWFmdGVyLXNwYWNlJztcblxuLyoqXG4gKiDlhpLlj7dcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IENPTE9OID0gJzonO1xuXG4vKipcbiAqIOmAl+WPt1xuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgQ09NTUEgPSAnLCc7XG5cbi8qKlxuICog5Yy56YWNIGNzcyDlsZ7mgKflgLznmoQgdXJsKC4uLik7XG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG5jb25zdCBQQVRURVJOX1VSSSA9IC91cmxcXChbXCInXT8oW15cXClcIiddKylbXCInXT9cXCkvaTtcblxuLyoqXG4gKiDlhpLlj7fnmoTplJnor6/kv6Hmga9cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IENPTE9OX01TRyA9ICcnXG4gICAgKyAnRGlzYWxsb3cgY29udGFpbiBzcGFjZXMgYmV0d2VlbiB0aGUgYGF0dHItbmFtZWAgYW5kIGA6YCwgJ1xuICAgICsgJ011c3QgY29udGFpbiBzcGFjZXMgYmV0d2VlbiBgOmAgYW5kIGBhdHRyLXZhbHVlYCc7XG5cbi8qKlxuICog6YCX5Y+355qE6ZSZ6K+v5L+h5oGvXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBDT01NQV9NU0cgPSAnTXVzdCBjb250YWluIHNwYWNlcyBhZnRlciBgLGAgaW4gYGF0dHItdmFsdWVgJztcblxuLyoqXG4gKiDlhbfkvZPnmoTmo4DmtYvpgLvovpFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyDlj4LmlbBcbiAqIEBwYXJhbSB7Kn0gb3B0cy5ydWxlVmFsIOW9k+WJjeinhOWImeWFt+S9k+mFjee9rueahOWAvFxuICogQHBhcmFtIHtzdHJpbmd9IG9wdHMuZmlsZUNvbnRlbnQg5paH5Lu25YaF5a65XG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5maWxlUGF0aCDmlofku7bot6/lvoRcbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrID0gcG9zdGNzcy5wbHVnaW4oUlVMRU5BTUUsIG9wdHMgPT5cbiAgICAoY3NzLCByZXN1bHQpID0+IHtcbiAgICAgICAgY29uc3QgcnVsZVZhbCA9IG9wdHMucnVsZVZhbDtcbiAgICAgICAgY29uc3QgcmVhbFJ1bGVWYWwgPSBbXTtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2hbQXJyYXkuaXNBcnJheShydWxlVmFsKSA/ICdhcHBseScgOiAnY2FsbCddKHJlYWxSdWxlVmFsLCBydWxlVmFsKTtcblxuICAgICAgICBpZiAocmVhbFJ1bGVWYWwubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgIGNzcy53YWxrRGVjbHMoZGVjbCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gZGVjbC5zb3VyY2U7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IHNvdXJjZS5zdGFydC5saW5lO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVDb250ZW50ID0gZ2V0TGluZUNvbnRlbnQobGluZSwgc291cmNlLmlucHV0LmNzcykgfHwgJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVhbFJ1bGVWYWwuaW5kZXhPZihDT0xPTikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJldHdlZW4gPSBkZWNsLnJhd3MuYmV0d2VlbjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmV0d2Vlbi5zbGljZSgwLCAxKSAhPT0gJzonIC8vIGDlsZ7mgKflkI1gIOS4juS5i+WQjueahCBgOmAg5LmL6Ze05YyF5ZCr56m65qC85LqGXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBiZXR3ZWVuLnNsaWNlKC0xKSA9PT0gJzonIC8vIGA6YCDkuI4gYOWxnuaAp+WAvGAg5LmL6Ze05LiN5YyF5ZCr56m65qC8XG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JTdHIgPSBkZWNsLnByb3AgKyBkZWNsLnJhd3MuYmV0d2VlbiArIGRlY2wudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQud2FybihSVUxFTkFNRSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IGRlY2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZU5hbWU6IFJVTEVOQU1FLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogQ09MT05fTVNHLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yTWVzc2FnZTogJ2AnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgbGluZUNvbnRlbnQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yU3RyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGsubWFnZW50YShjb2xvclN0cilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICdgICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBjaGFsay5ncmV5KENPTE9OX01TRylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlYWxSdWxlVmFsLmluZGV4T2YoQ09NTUEpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY2wudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g5o6S6Zmk5o6JIHVyaSDnmoTmg4XlhrXvvIzkvovlpoJcbiAgICAgICAgICAgICAgICAgICAgLy8gYmFja2dyb3VuZC1pbWFnZTogdXJsKGRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaENBQUhBSUFCQUdabVp2Li4uKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYmFja2dyb3VuZC1pbWFnZTogMnB4IDJweCB1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQ0FBSEFJQUJBR1ptWnYuLi4pO1xuICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQ0FBSEFJQUJBR1ptWnYuLi4pIDJweCAycHg7XG4gICAgICAgICAgICAgICAgICAgIGlmICghUEFUVEVSTl9VUkkudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gbGluZUNvbnRlbnQuc3BsaXQoJzsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBqTGVuID0gaXRlbXMubGVuZ3RoOyBqIDwgakxlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IGl0ZW1zW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmluZGV4T2YoJywnKSA+IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIC8uKiwoPyFcXHMpLy50ZXN0KHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHMubGVuZ3RoICE9PSBsaW5lQ29udGVudC5sZW5ndGggLy8gcy5sZW5ndGggPT09IGxpbmVDb250ZW50Lmxlbmd0aCDnmoTmg4XlhrXooajnpLrlvZPliY3ooYznu5PmnZ/kuoZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lndhcm4oUlVMRU5BTUUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IGRlY2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlTmFtZTogUlVMRU5BTUUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNoYXI6IENPTU1BLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogbGluZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IENPTU1BX01TRyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yTWVzc2FnZTogJ2AnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsaW5lQ29udGVudC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbGsubWFnZW50YSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnYCAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBjaGFsay5ncmV5KENPTU1BX01TRylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbik7XG4iXX0=